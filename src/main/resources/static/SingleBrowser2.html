<!DOCTYPE html>
<html>
<head>
    <script src="jquery-1.10.1.min.js"></script>
    <style>
        .center {
            margin: auto;
            width: 450px;
            border: 1px solid silver;
            padding: 10px;
        }

        .txt {
            width: 50px;
        }

        .p1-back {
            background-color: aquamarine;
        }

        .p2-back {
            background-color: coral;
        }

        .hidden {
            display: none;
        }
    </style>
</head>
<body>
<input type="hidden" id="hid-url"/>
<div class="" style="margin-bottom: 50px;"></div>
<div class="center">
    <input id="btnStart" type="button" value="start" class="txt" onclick="start();"/>
</div>

<div></div>
<div class="center hidden pit-row">
    <input id="pit7" type="text" readonly="readonly" class="pit txt p1-back"/>
    <input id="pit6" type="text" readonly="readonly" class="pit txt" value="6"/>
    <input id="pit5" type="text" readonly="readonly" class="pit txt" value="6"/>
    <input id="pit4" type="text" readonly="readonly" class="pit txt" value="6"/>
    <input id="pit3" type="text" readonly="readonly" class="pit txt" value="6"/>
    <input id="pit2" type="text" readonly="readonly" class="pit txt" value="6"/>
    <input id="pit1" type="text" readonly="readonly" class="pit txt" value="6"/>
</div>
<div class="center hidden pit-row">
    <input id="pit8" type="text" readonly="readonly" class="pit txt" value="6"/>
    <input id="pit9" type="text" readonly="readonly" class="pit txt" value="6"/>
    <input id="pit10" type="text" readonly="readonly" class="pit txt" value="6"/>
    <input id="pit11" type="text" readonly="readonly" class="pit txt" value="6"/>
    <input id="pit12" type="text" readonly="readonly" class="pit txt" value="6"/>
    <input id="pit13" type="text" readonly="readonly" class="pit txt" value="6"/>
    <input id="pit14" type="text" readonly="readonly" class="pit txt p2-back"/>
</div>
<div class="center hidden submit-row">
    <input id="pitNumber" type="text"/>
    <input type="button" value="Submit" onclick="submit();"/>
</div>

</body>
</html>
<script>

    var setTextBoxes = function (respStr) {
        console.log("setTextBoxes called");
        //console.log(respStr);
        var resp = JSON.parse(respStr);
        //.log(resp.status[1]);
        $("#pit1").val(resp.status[1]);
        $("#pit2").val(resp.status[2]);
        $("#pit3").val(resp.status[3]);
        $("#pit4").val(resp.status[4]);
        $("#pit5").val(resp.status[5]);
        $("#pit6").val(resp.status[6]);
        $("#pit7").val(resp.status[7]);
        $("#pit8").val(resp.status[8]);
        $("#pit9").val(resp.status[9]);
        $("#pit10").val(resp.status[10]);
        $("#pit11").val(resp.status[11]);
        $("#pit12").val(resp.status[12]);
        $("#pit13").val(resp.status[13]);
        $("#pit14").val(resp.status[14]);

    };

    var submit = function () {
        var pitNumber = $("#pitNumber").val();
        var postUrl = 'http://localhost:8087/api/v1/games/single/'+document.cookie+'/pits/' + pitNumber;
        console.log('postUrl:  '+ postUrl);
        fetch(postUrl, {
            method: "POST",
            body: JSON.stringify({}),
            headers: {
                "Content-type": "application/json;charset=UTF-8",
                "Accept": "*/*"
            }
        }).then(response => {
           console.log(response);
           //setTextBoxes(response)
        })
    };

    var start = function () {
        console.log("start called");
        document.getElementById("btnStart").disabled = true;
        console.log('start the game')
        fetch('http://localhost:8087/api/v1/games/single/', {
            method: "POST",
            headers: {
                "Content-type": "application/json;charset=UTF-8",
                "Accept": "*/*"
            }
        })
            .then(response => response.json())
            .then(json => {
                console.log(json)
                const obj = json;
                console.log(obj.id)
                document.cookie = obj.id;
            })
            .catch(err => console.log(err));

        //setTextBoxes()
        $(".pit-row").show();
        $(".submit-row").show();
    };

    </script>